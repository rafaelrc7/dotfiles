{ pkgs, ... }:
let
  toLuaFile = file: "lua << EOF\n${builtins.readFile file}\nEOF\n";
in
{
  programs.neovim.plugins = [{
    config = toLuaFile ./lua/plugin/treesitter.lua;
    plugin = (pkgs.vimPlugins.nvim-treesitter.withPlugins (p: with p; [
      yaml
      xml
      vimdoc
      vim
      typescript
      toml
      ssh_config
      sql
      scss
      scheme
      rust
      rst
      regex
      racket
      r
      python
      perl
      passwd
      ocaml
      ocamllex
      ocaml_interface
      objdump
      nix
      ninja
      nasm
      meson
      matlab
      markdown_inline
      markdown
      make
      lua
      llvm
      latex
      kotlin
      julia
      json5
      json
      jq
      javascript
      java
      ini
      http
      html
      hlsl
      haskell
      groovy
      gpg
      godot_resource
      go
      glsl
      gitignore
      gitcommit
      gitattributes
      git_rebase
      git_config
      gdscript
      fennel
      elixir
      dockerfile
      diff
      csv
      css
      cpp
      commonlisp
      comment
      cmake
      c_sharp
      c
      bibtex
      bash
      awk
      arduino
    ]));
  }];
}

